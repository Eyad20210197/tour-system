{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\source\\\\repos\\\\Tour System Web Application\\\\client\\\\src\\\\pages\\\\private\\\\tour-agency\\\\TourPackages.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { AuthContext } from \"../../../context/AuthContext\";\nimport TourForm from \"../../../components/TourForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TourPackages() {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [tours, setTours] = useState([]);\n  const [tourData, setTourData] = useState({\n    name: \"\",\n    category: \"\",\n    price: \"\",\n    duration: \"\",\n    seats: \"\",\n    description: \"\",\n    imageUrl: \"\"\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [editTourId, setEditTourId] = useState(null);\n  useEffect(() => {\n    if (user && user.id) {\n      fetch(`http://localhost:5055/api/tours?agencyId=${user.id}`).then(res => res.json()).then(data => {\n        if (Array.isArray(data)) {\n          setTours(data);\n        } else {\n          setTours([]); // fallback to empty array\n          console.error(\"Tours is not an array:\", data);\n        }\n      }).catch(console.error);\n    }\n  }, [user]);\n  const handleChange = e => {\n    setTourData({\n      ...tourData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleAddTour = e => {\n    e.preventDefault();\n    const newTour = {\n      ...tourData,\n      agencyId: user.id,\n      status: \"pending\" // All new tours require admin approval\n    };\n    fetch(\"http://localhost:5055/api/tours\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newTour)\n    }).then(res => res.json()).then(created => {\n      alert(\"Tour submitted for admin approval.\");\n      setTours(prev => [...prev, created]);\n      setTourData({\n        name: \"\",\n        category: \"\",\n        price: \"\",\n        duration: \"\",\n        seats: \"\",\n        description: \"\",\n        imageUrl: \"\"\n      });\n    }).catch(console.error);\n  };\n  const handleEditTour = tour => {\n    setEditMode(true);\n    setEditTourId(tour.id);\n    setTourData({\n      ...tour\n    });\n  };\n  const handleUpdateTour = e => {\n    e.preventDefault();\n    fetch(`http://localhost:5055/api/tours/${editTourId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        ...tourData,\n        id: editTourId,\n        agencyId: user.id\n      })\n    }).then(() => {\n      setTours(tours.map(t => t.id === editTourId ? {\n        ...t,\n        ...tourData\n      } : t));\n      setEditMode(false);\n      setEditTourId(null);\n      setTourData({\n        name: \"\",\n        category: \"\",\n        price: \"\",\n        duration: \"\",\n        seats: \"\",\n        description: \"\",\n        imageUrl: \"\"\n      });\n    }).catch(console.error);\n  };\n  const handleDeleteTour = tourId => {\n    fetch(`http://localhost:5055/api/tours/${tourId}`, {\n      method: \"DELETE\"\n    }).then(() => setTours(tours.filter(t => t.id !== tourId))).catch(console.error);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"FunctionalComponent\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Manage Your Tour Packages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(TourForm, {\n      tourData: tourData,\n      handleChange: handleChange,\n      handleSubmit: editMode ? handleUpdateTour : handleAddTour,\n      editMode: editMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Tours\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"Grid small\",\n      children: tours.map(tour => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: tour.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Status: \", tour.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Category: \", tour.category, \" - Price: $\", tour.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEditTour(tour),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteTour(tour.id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this)]\n      }, tour.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 9\n  }, this);\n}\n_s(TourPackages, \"EgJgJ/gbd4w841nNZIFwQSgO5UU=\");\n_c = TourPackages;\nvar _c;\n$RefreshReg$(_c, \"TourPackages\");","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","TourForm","jsxDEV","_jsxDEV","TourPackages","_s","user","tours","setTours","tourData","setTourData","name","category","price","duration","seats","description","imageUrl","editMode","setEditMode","editTourId","setEditTourId","id","fetch","then","res","json","data","Array","isArray","console","error","catch","handleChange","e","target","value","handleAddTour","preventDefault","newTour","agencyId","status","method","headers","body","JSON","stringify","created","alert","prev","handleEditTour","tour","handleUpdateTour","map","t","handleDeleteTour","tourId","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","handleSubmit","onClick","_c","$RefreshReg$"],"sources":["C:/Users/DELL/source/repos/Tour System Web Application/client/src/pages/private/tour-agency/TourPackages.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../../../context/AuthContext\";\r\nimport TourForm from \"../../../components/TourForm\";\r\n\r\nexport default function TourPackages() {\r\n    const { user } = useContext(AuthContext);\r\n    const [tours, setTours] = useState([]);\r\n    const [tourData, setTourData] = useState({\r\n        name: \"\",\r\n        category: \"\",\r\n        price: \"\",\r\n        duration: \"\",\r\n        seats: \"\",\r\n        description: \"\",\r\n        imageUrl: \"\"\r\n    });\r\n    const [editMode, setEditMode] = useState(false);\r\n    const [editTourId, setEditTourId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (user && user.id) {\r\n            fetch(`http://localhost:5055/api/tours?agencyId=${user.id}`)\r\n                .then((res) => res.json())\r\n                .then((data) => {\r\n                    if (Array.isArray(data)) {\r\n                        setTours(data);\r\n                    } else {\r\n                        setTours([]); // fallback to empty array\r\n                        console.error(\"Tours is not an array:\", data);\r\n                    }\r\n                })\r\n                .catch(console.error);\r\n\r\n        }\r\n    }, [user]);\r\n\r\n    const handleChange = (e) => {\r\n        setTourData({ ...tourData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleAddTour = (e) => {\r\n        e.preventDefault();\r\n        const newTour = {\r\n            ...tourData,\r\n            agencyId: user.id,\r\n            status: \"pending\" // All new tours require admin approval\r\n        };\r\n\r\n        fetch(\"http://localhost:5055/api/tours\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(newTour)\r\n        })\r\n            .then((res) => res.json())\r\n            .then((created) => {\r\n                alert(\"Tour submitted for admin approval.\");\r\n                setTours((prev) => [...prev, created]);\r\n                setTourData({\r\n                    name: \"\",\r\n                    category: \"\",\r\n                    price: \"\",\r\n                    duration: \"\",\r\n                    seats: \"\",\r\n                    description: \"\",\r\n                    imageUrl: \"\"\r\n                });\r\n            })\r\n            .catch(console.error);\r\n    };\r\n\r\n    const handleEditTour = (tour) => {\r\n        setEditMode(true);\r\n        setEditTourId(tour.id);\r\n        setTourData({ ...tour });\r\n    };\r\n\r\n    const handleUpdateTour = (e) => {\r\n        e.preventDefault();\r\n\r\n        fetch(`http://localhost:5055/api/tours/${editTourId}`, {\r\n            method: \"PUT\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ ...tourData, id: editTourId, agencyId: user.id })\r\n        })\r\n            .then(() => {\r\n                setTours(tours.map((t) => (t.id === editTourId ? { ...t, ...tourData } : t)));\r\n                setEditMode(false);\r\n                setEditTourId(null);\r\n                setTourData({\r\n                    name: \"\",\r\n                    category: \"\",\r\n                    price: \"\",\r\n                    duration: \"\",\r\n                    seats: \"\",\r\n                    description: \"\",\r\n                    imageUrl: \"\"\r\n                });\r\n            })\r\n            .catch(console.error);\r\n    };\r\n\r\n    const handleDeleteTour = (tourId) => {\r\n        fetch(`http://localhost:5055/api/tours/${tourId}`, {\r\n            method: \"DELETE\"\r\n        })\r\n            .then(() => setTours(tours.filter((t) => t.id !== tourId)))\r\n            .catch(console.error);\r\n    };\r\n\r\n    return (\r\n        <div className=\"FunctionalComponent\">\r\n            <h1>Manage Your Tour Packages</h1>\r\n\r\n            <TourForm\r\n                tourData={tourData}\r\n                handleChange={handleChange}\r\n                handleSubmit={editMode ? handleUpdateTour : handleAddTour}\r\n                editMode={editMode}\r\n            />\r\n\r\n            <h2>Your Tours</h2>\r\n            <ul className=\"Grid small\">\r\n                {tours.map((tour) => (\r\n                    <li key={tour.id}>\r\n                        <h3>{tour.name}</h3>\r\n                        <p>Status: {tour.status}</p>\r\n                        <p>Category: {tour.category} - Price: ${tour.price}</p>\r\n                        <div className=\"buttons\">\r\n                            <button onClick={() => handleEditTour(tour)}>Edit</button>\r\n                            <button onClick={() => handleDeleteTour(tour.id)}>Delete</button>\r\n                        </div>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}