{"ast":null,"code":"var _jsxFileName = \"D:\\\\University\\\\tour-system\\\\src\\\\pages\\\\private\\\\tour-agency\\\\TourPackages.jsx\",\n  _s = $RefreshSig$();\n// TourPackages.jsx\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { AuthContext } from \"../../../context/AuthContext\";\nimport TourForm from \"../../../components/TourForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function TourPackages() {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [tours, setTours] = useState([]);\n  const [tourData, setTourData] = useState({\n    name: \"\",\n    category: \"\",\n    price: \"\",\n    duration: \"\",\n    seats: \"\",\n    description: \"\",\n    imageUrl: \"\"\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [editTourId, setEditTourId] = useState(null);\n  useEffect(() => {\n    if (user && user.id) {\n      fetch(`http://localhost:5500/tours?agencyId=${user.id}`).then(res => res.json()).then(setTours).catch(console.error);\n    }\n  }, [user]);\n  const handleChange = e => {\n    setTourData({\n      ...tourData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleAddTour = e => {\n    e.preventDefault();\n    const request = {\n      agencyId: user.id,\n      agencyName: user.username,\n      action: \"add\",\n      tour: tourData\n    };\n    fetch(\"http://localhost:5500/tourRequests\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(request)\n    }).then(() => {\n      alert(\"Tour request submitted for admin approval.\");\n      setTourData({\n        name: \"\",\n        category: \"\",\n        price: \"\",\n        duration: \"\",\n        seats: \"\",\n        description: \"\",\n        imageUrl: \"\"\n      });\n    }).catch(console.error);\n  };\n  const handleEditTour = tour => {\n    setEditMode(true);\n    setEditTourId(tour.id);\n    setTourData({\n      ...tour\n    });\n  };\n  const handleUpdateTour = e => {\n    e.preventDefault();\n    fetch(`http://localhost:5500/tours/${editTourId}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(tourData)\n    }).then(() => {\n      setTours(tours.map(t => t.id === editTourId ? {\n        ...t,\n        ...tourData\n      } : t));\n      setEditMode(false);\n      setEditTourId(null);\n      setTourData({\n        name: \"\",\n        category: \"\",\n        price: \"\",\n        duration: \"\",\n        seats: \"\",\n        description: \"\",\n        imageUrl: \"\"\n      });\n    }).catch(console.error);\n  };\n  const handleDeleteTour = tourId => {\n    fetch(`http://localhost:5500/tours/${tourId}`, {\n      method: \"DELETE\"\n    }).then(() => setTours(tours.filter(t => t.id !== tourId))).catch(console.error);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"FunctionalComponent\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Manage Your Tour Packages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TourForm, {\n      tourData: tourData,\n      handleChange: handleChange,\n      handleSubmit: editMode ? handleUpdateTour : handleAddTour,\n      editMode: editMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Your Tours\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"Grid small\",\n      children: tours.map(tour => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: tour.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Category: \", tour.category, \" - Price: $\", tour.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"buttons\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEditTour(tour),\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDeleteTour(tour.id),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)]\n      }, tour.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s(TourPackages, \"fMzXuY0kekQ/rc7qPadeX99DLek=\");\n_c = TourPackages;\nvar _c;\n$RefreshReg$(_c, \"TourPackages\");","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","TourForm","jsxDEV","_jsxDEV","TourPackages","_s","user","tours","setTours","tourData","setTourData","name","category","price","duration","seats","description","imageUrl","editMode","setEditMode","editTourId","setEditTourId","id","fetch","then","res","json","catch","console","error","handleChange","e","target","value","handleAddTour","preventDefault","request","agencyId","agencyName","username","action","tour","method","headers","body","JSON","stringify","alert","handleEditTour","handleUpdateTour","map","t","handleDeleteTour","tourId","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","handleSubmit","onClick","_c","$RefreshReg$"],"sources":["D:/University/tour-system/src/pages/private/tour-agency/TourPackages.jsx"],"sourcesContent":["// TourPackages.jsx\r\nimport React, { useEffect, useState, useContext } from \"react\";\r\nimport { AuthContext } from \"../../../context/AuthContext\";\r\nimport TourForm from \"../../../components/TourForm\";\r\n\r\nexport default function TourPackages() {\r\n  const { user } = useContext(AuthContext);\r\n  const [tours, setTours] = useState([]);\r\n  const [tourData, setTourData] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    price: \"\",\r\n    duration: \"\",\r\n    seats: \"\",\r\n    description: \"\",\r\n    imageUrl: \"\"\r\n  });\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editTourId, setEditTourId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (user && user.id) {\r\n      fetch(`http://localhost:5500/tours?agencyId=${user.id}`)\r\n        .then((res) => res.json())\r\n        .then(setTours)\r\n        .catch(console.error);\r\n    }\r\n  }, [user]);\r\n\r\n  const handleChange = (e) => {\r\n    setTourData({ ...tourData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleAddTour = (e) => {\r\n    e.preventDefault();\r\n    const request = {\r\n      agencyId: user.id,\r\n      agencyName: user.username,\r\n      action: \"add\",\r\n      tour: tourData\r\n    };\r\n\r\n    fetch(\"http://localhost:5500/tourRequests\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(request)\r\n    })\r\n      .then(() => {\r\n        alert(\"Tour request submitted for admin approval.\");\r\n        setTourData({ name: \"\", category: \"\", price: \"\", duration: \"\", seats: \"\", description: \"\", imageUrl: \"\" });\r\n      })\r\n      .catch(console.error);\r\n  };\r\n\r\n  const handleEditTour = (tour) => {\r\n    setEditMode(true);\r\n    setEditTourId(tour.id);\r\n    setTourData({ ...tour });\r\n  };\r\n\r\n  const handleUpdateTour = (e) => {\r\n    e.preventDefault();\r\n\r\n    fetch(`http://localhost:5500/tours/${editTourId}`, {\r\n      method: \"PATCH\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(tourData)\r\n    })\r\n      .then(() => {\r\n        setTours(tours.map((t) => (t.id === editTourId ? { ...t, ...tourData } : t)));\r\n        setEditMode(false);\r\n        setEditTourId(null);\r\n        setTourData({ name: \"\", category: \"\", price: \"\", duration: \"\", seats: \"\", description: \"\", imageUrl: \"\" });\r\n      })\r\n      .catch(console.error);\r\n  };\r\n\r\n  const handleDeleteTour = (tourId) => {\r\n    fetch(`http://localhost:5500/tours/${tourId}`, {\r\n      method: \"DELETE\"\r\n    })\r\n      .then(() => setTours(tours.filter((t) => t.id !== tourId)))\r\n      .catch(console.error);\r\n  };\r\n\r\n  return (\r\n    <div className=\"FunctionalComponent\">\r\n      <h1>Manage Your Tour Packages</h1>\r\n\r\n      <TourForm\r\n        tourData={tourData}\r\n        handleChange={handleChange}\r\n        handleSubmit={editMode ? handleUpdateTour : handleAddTour}\r\n        editMode={editMode}\r\n      />\r\n\r\n      <h2>Your Tours</h2>\r\n      <ul className=\"Grid small\">\r\n        {tours.map((tour) => (\r\n          <li key={tour.id}>\r\n            <h3>{tour.name}</h3>\r\n            <p>Category: {tour.category} - Price: ${tour.price}</p>\r\n            <div className=\"buttons\">\r\n              <button onClick={() => handleEditTour(tour)}>Edit</button>\r\n              <button onClick={() => handleDeleteTour(tour.id)}>Delete</button>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}